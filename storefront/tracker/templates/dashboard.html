{% extends 'base.html' %}

{% block content %}
        <!-- Dashboard Metrics -->
        <div class="dashboard-grid">
            <div class="card profit-card">
                <div class="metric-label">Today's Revenue</div>
                <div class="metric-value">$1,247.50 <span class="trend-indicator trend-up">‚Üó</span></div>
                <div style="font-size: 0.9rem; opacity: 0.9;">+12% from yesterday</div>
            </div>

            <div class="card loss-card">
                <div class="metric-label">Today's Expenses</div>
                <div class="metric-value">$892.30 <span class="trend-indicator trend-down">‚Üò</span></div>
                <div style="font-size: 0.9rem; opacity: 0.9;">-5% from yesterday</div>
            </div>

            <div class="card">
                <div class="metric-label">Net Profit</div>
                <div class="metric-value" style="color: #4CAF50;">$355.20</div>
                <div style="font-size: 0.9rem; color: #666;">Profit Margin: 28.5%</div>
            </div>

            <div class="card">
                <div class="metric-label">AI Risk Score</div>
                <div class="metric-value" style="color: #FFA726;">6.2/10</div>
                <div style="font-size: 0.9rem; color: #666;">Medium Risk Level</div>
            </div>
        </div>

        <!-- AI Insights Section -->
        <div class="ai-insights">
            <h3>ü§ñ AI Loss Prevention Insights</h3>
            
            <div class="insight-item">
                <div class="insight-severity severity-high">HIGH PRIORITY</div>
                <h4>Inventory Wastage Pattern Detected</h4>
                <p>Your vegetable purchases exceed sales by 23% on Thursdays. Consider reducing Thursday inventory by 15-20% to prevent $45-60 weekly losses.</p>
            </div>

            <div class="insight-item">
                <div class="insight-severity severity-medium">MEDIUM PRIORITY</div>
                <h4>Peak Hour Opportunity Missed</h4>
                <p>Sales spike 40% between 5-7 PM, but you're understocked during this period. Increasing evening inventory could boost daily revenue by $80-120.</p>
            </div>

            <div class="insight-item">
                <div class="insight-severity severity-low">OPTIMIZATION</div>
                <h4>Transport Cost Efficiency</h4>
                <p>Consolidating your Tuesday and Wednesday supplier trips could save $25-35 weekly on transportation costs.</p>
            </div>
        </div>

        <!-- Prediction Box -->
        <div class="prediction-box">
            <h3>üìä AI Profit Prediction - Next 7 Days</h3>
            <div style="font-size: 1.5rem; margin: 15px 0;">
                Expected Profit Range: <strong>$1,850 - $2,340</strong>
            </div>
            <div style="font-size: 1rem; opacity: 0.9;">
                <strong>Key Factors:</strong> Weather forecast shows sunny days (good for foot traffic), local festival this weekend (+30% expected sales), supplier price increase Tuesday (-$45 profit impact)
            </div>
        </div>

        <!-- Charts Section -->
        <div class="dashboard-grid">
            <div class="card">
                <h3>Profit Trend Analysis</h3>
                <div class="chart-container">
                    <div class="chart-placeholder">üìà Interactive Chart Loading<span class="loading-dots"></span></div>
                </div>
            </div>

            <div class="card">
                <h3>Loss Category Breakdown</h3>
                <div class="chart-container">
                    <div class="chart-placeholder">ü•ß Pie Chart: Spoilage 45%, Transport 25%, Overhead 20%, Other 10%</div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="card">
            <h3>Quick Actions</h3>
            <div class="quick-actions">
                <button class="action-btn" onclick="addTransaction('sale')">
                    üí∞ Add Sale
                </button>
                <button class="action-btn" onclick="addTransaction('expense')">
                    üí∏ Add Expense
                </button>
                <button class="action-btn voice-btn pulse" onclick="startVoiceInput()">
                    üé§ Voice Input
                </button>
                <button class="action-btn photo-btn" onclick="startPhotoInput()">
                    üì∏ Photo Receipt
                </button>
            </div>
        </div>

        <!-- Recent Transactions -->
        <div class="card">
            <h3>Recent Transactions</h3>
            <table class="transactions-table">
                <thead>
                    <tr>
                        <th>Time</th>
                        <th>Description</th>
                        <th>Category</th>
                        <th>Amount</th>
                        <th>AI Insight</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>2:30 PM</td>
                        <td>Sold 5kg tomatoes</td>
                        <td>Vegetables</td>
                        <td class="amount-positive">+$25.00</td>
                        <td>‚úÖ Good timing (peak hour)</td>
                    </tr>
                    <tr>
                        <td>1:15 PM</td>
                        <td>Transport to market</td>
                        <td>Transport</td>
                        <td class="amount-negative">-$8.50</td>
                        <td>‚ö†Ô∏è Could be optimized</td>
                    </tr>
                    <tr>
                        <td>12:45 PM</td>
                        <td>Bought packaging supplies</td>
                        <td>Supplies</td>
                        <td class="amount-negative">-$15.00</td>
                        <td>üìä Normal expense</td>
                    </tr>
                    <tr>
                        <td>11:30 AM</td>
                        <td>Sold fruits mix</td>
                        <td>Fruits</td>
                        <td class="amount-positive">+$42.50</td>
                        <td>üéØ High margin item</td>
                    </tr>
                    <tr>
                        <td>10:15 AM</td>
                        <td>Discarded spoiled items</td>
                        <td>Loss</td>
                        <td class="amount-negative">-$12.00</td>
                        <td>üö® Pattern detected</td>
                    </tr>
                </tbody>
            </table>
        </div>
{% endblock %}